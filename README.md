# 互动小说创作工具 📖

一个功能完整的互动小说引擎和可视化编辑器，支持复杂的变量系统、条件判断和多分支剧情。适用于PC和移动设备。

## ✨ 核心特性

### 🎮 游玩模式
- **沉浸式故事体验**：清晰的文本显示和选项交互
- **三类变量系统**：
  - 💪 **生理系统**：健康、精力、饥饿等生理指标
  - ❤️ **情感系统**：好感度、信任、羞耻等情感状态
  - ⚡ **难度系统**：理智、敏感度、压力等难度调节
- **实时状态显示**：可视化进度条显示所有变量状态
- **存档系统**：支持多存档和自动保存
- **历史回溯**：查看和回到之前的剧情节点
- **响应式设计**：完美适配手机、平板和PC

### ✏️ 编辑模式
- **可视化节点编辑**：直观的剧情节点管理
- **选项配置**：
  - 自定义选项文本
  - 节点跳转设置
  - 条件判断（显示/隐藏选项）
  - 变量操作（加减乘除、赋值）
- **变量管理**：
  - 自定义变量定义
  - 设置初始值、最小值、最大值
  - 三大类别独立管理
- **导出/导入**：JSON格式的剧情数据共享

## 🚀 快速开始

### 1. 加载示例故事
1. 打开页面，点击 **🎬 加载示例** 按钮
2. 体验预设的示例剧情《神秘的森林》
3. 尝试不同的选项，观察变量变化

### 2. 创建自己的故事
1. 切换到 **✏️ 编辑模式**
2. 点击 **+ 新建** 创建剧情节点
3. 编辑节点内容：
   - 设置节点标题
   - 编写故事文本（支持多行）
   - 添加选项
   - 配置选项跳转和变量操作
4. 切换回 **🎮 游玩模式** 测试效果

### 3. 配置变量系统
1. 在编辑模式右侧 **🎯 变量管理** 面板
2. 点击 **+ 添加** 按钮添加新变量
3. 设置变量属性：
   - ID（英文标识符）
   - 名称（显示名称）
   - 初始值、最小值、最大值

## 📚 功能说明

### 节点编辑

#### 基础信息
- **节点ID**：自动生成的唯一标识符
- **节点标题**：用于在节点列表中识别
- **故事文本**：显示给玩家的剧情内容（支持换行）

#### 选项配置
每个选项包含：
- **选项文本**：按钮上显示的文字
- **跳转节点**：选择后进入的下一个节点
- **条件判断**：
  - 选择变量类别（生理/情感/难度）
  - 选择具体变量
  - 设置比较运算符（>、>=、==、<=、<、!=）
  - 设置比较值
  - 不满足条件时选项显示为灰色
- **变量操作**：
  - 可添加多个变量操作
  - 支持操作类型：加(+)、减(-)、乘(×)、除(÷)、赋值(=)
  - 选择后立即执行

### 变量系统

#### 三大类别
1. **生理系统**（💪）：角色的生理状态
   - 默认变量：健康、精力、饥饿
   - 用途：生存类、模拟类游戏

2. **情感系统**（❤️）：角色间的情感关系
   - 默认变量：好感度、信任、羞耻
   - 用途：恋爱类、角色扮演游戏

3. **难度系统**（⚡）：游戏难度调节
   - 默认变量：理智、敏感度、压力
   - 用途：恐怖类、挑战类游戏

#### 变量操作示例
```
选项：吃一顿饭
变量操作：
- 饥饿 - 30  （减少饥饿值）
- 健康 + 10  （增加健康值）
- 精力 + 20  （恢复精力）
```

### 条件判断示例
```
选项：进行剧烈运动
条件：精力 > 30
效果：精力不足30时，此选项显示为灰色不可选
```

### 存档功能
- **自动保存**：每次做选择后自动保存
- **手动保存**：可创建多个命名存档
- **读档**：输入存档名称加载进度
- **重新开始**：重置所有变量和剧情

### 历史记录
- 查看已经历的所有剧情节点
- 点击历史记录可回到该时间点
- 回溯会丢失之后的进度（需确认）

## 💾 数据导出/导入

### 导出故事
1. 点击 **📤 导出** 按钮
2. 自动下载JSON文件（包含剧情和变量定义）
3. 文件名格式：`story_时间戳.json`

### 导入故事
1. 点击 **📥 导入** 按钮
2. 选择之前导出的JSON文件
3. 系统会加载剧情数据和变量配置

### 分享你的故事
- 将导出的JSON文件分享给其他创作者
- 他们可以在自己的页面导入并继续创作
- 适合团队协作或作品发布

## 📱 移动端使用

### 手机/平板优化
- 自动适配屏幕尺寸
- 触摸友好的按钮大小
- 可折叠的变量面板（节省屏幕空间）
- 纵向布局优化

### 使用建议
- **创作**：建议使用PC端的编辑模式
- **游玩**：手机和PC都有良好体验
- **测试**：在编辑后立即在手机上测试效果

## 🎨 创作技巧

### 1. 剧情结构设计
```
开始 → 主线分支1 → 结局A
     → 主线分支2 → 结局B
     → 主线分支3 → 结局C
```

### 2. 变量设计原则
- **不要过多**：每类3-5个变量即可
- **有意义**：变量应影响剧情走向
- **平衡性**：确保变量增减合理

### 3. 条件设置
- 使用条件创建隐藏选项
- 根据变量值开放不同路线
- 增加重玩价值

### 4. 文本撰写
- 使用换行符分段（按回车键）
- 适当的留白增强阅读体验
- 选项文本要简洁有力

## 🔧 技术说明

### 本地存储
- 使用 `localStorage` 存储所有数据
- 剧情数据键：`storyData`
- 变量定义键：`variableDefinitions`
- 存档键：`save_[存档名]`

### 数据清除
如需完全重置：
```javascript
// 在浏览器控制台执行
localStorage.clear();
location.reload();
```

### 浏览器兼容性
- Chrome、Edge、Safari、Firefox 最新版本
- iOS Safari 12+
- Android Chrome 80+

## 📖 示例剧情说明

内置的《神秘的森林》示例包含：
- 6个剧情节点
- 多种选项和分支
- 变量条件判断
- 完整的游戏循环

用它来学习如何：
- 创建多分支剧情
- 设置选项条件
- 使用变量操作
- 平衡游戏难度

## 🎯 高级功能

### 复杂条件链
通过多个节点和条件组合，创建复杂的剧情触发机制：
```
好感度 >= 80 且 信任 >= 60 → 特殊剧情
理智 < 30 → 坏结局
健康 < 20 → 游戏失败
```

### 变量联动
不同变量之间可以产生联动效果：
```
选项：拼命工作
效果：
- 精力 - 40
- 压力 + 20
- 健康 - 10
```

### 多周目设计
利用变量和条件创建多周目内容：
- 首次游玩：基础路线
- 特定条件：隐藏路线
- 完美结局：需要精确控制变量

## 🤝 建议与支持

### 最佳实践
1. 经常保存和导出（防止数据丢失）
2. 先在PC上创作，在手机上测试
3. 合理设置变量范围（避免溢出）
4. 为每个节点设置有意义的标题

### 常见问题
**Q: 如何删除节点？**  
A: 在编辑模式选中节点后，点击底部的"删除此节点"按钮。

**Q: 为什么有些选项是灰色的？**  
A: 该选项设置了条件判断，当前变量值不满足条件。

**Q: 如何创建多结局？**  
A: 创建多个结局节点，通过不同的选项路径指向它们。

**Q: 存档保存在哪里？**  
A: 存档保存在浏览器的localStorage中，清除浏览器数据会丢失存档。

**Q: 能否在手机上编辑？**  
A: 可以，但建议使用横屏或平板设备以获得更好的编辑体验。

## 🎉 开始创作！

现在您已经了解了所有功能，可以开始创作您的互动小说了！

1. 🎬 先加载示例故事熟悉系统
2. ✏️ 切换到编辑模式
3. 🚀 发挥您的创意，创作独特的故事
4. 📤 完成后导出分享给朋友

祝您创作愉快！✨

---

**版本**: 1.0  
**更新日期**: 2026-01-04  
**技术栈**: 纯HTML + CSS + JavaScript（无需服务器）
